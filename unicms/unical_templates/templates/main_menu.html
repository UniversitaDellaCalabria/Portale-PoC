{% load i18n %}
{% load static %}

{% for item in menu %}
    <li class="nav-item {% if forloop.first %}active {% endif %}{% if item.get_childs %}dropdown megamenu{% endif %}">
        <a class="nav-link {% if item.get_childs %}dropdown_toggle{% endif %}" href={% if subitem.link %}"{{ subitem.get_link}}"{% else %}"#"{% endif %} {% if item.get_childs %}data-toggle="dropdown" aria-expanded="false"{% endif %}>
            <span>{{ item.name }}</span>
            {% if item.get_childs %}<svg class="icon icon-xs">
                <use xlink:href="{% static 'svg/sprite.svg' %}#it-expand"></use>
            </svg>{% endif %}
        </a>
        {% if item.get_childs %}
        <div class="dropdown-menu">
            <div class="row">
                <div class="col-12 col-lg-4">
                    <div class="link-list-wrapper">
                        <ul class="link-list">
                        {% for subitem in item.get_childs %}

                            {% if not subitem.link %}
                                {% if not forloop.first %}
                                    </div> <!-- link-list-wrapper -->
                                </div> <!-- link-list -->
                                <div class="link-list-wrapper">
                                    <ul class="link-list">
                                {% endif %}
                            <li>
                                <h3 class="no_toc" id="heading">{{ subitem.name }}</h3>
                            </li>

                            {% else %}

                            <li>
                                <a class="list-item" href={% if subitem.link %}"{{ subitem.get_link}}"{% else %}"#"{% endif %}>
                                    <span>{{ subitem.name }}</span>
                                </a>
                            </li>
                            {% endif %}

                        {% endfor %}
                        </ul>
                    </div>
        </div>
        {% endif %}
    </li>
{% endfor %}

{% comment %}
    <li class="nav-item dropdown megamenu">
        <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-expanded="false">
            <span>Esempio di Megamenu</span>
            <svg class="icon icon-xs">
                <use xlink:href="{% static 'svg/sprite.svg' %}#it-expand"></use>
            </svg>
        </a>
        <div class="dropdown-menu">
            <div class="row">
                <div class="col-12 col-lg-4">
                    <div class="link-list-wrapper">
                        <ul class="link-list">
                            <li>
                                <h3 class="no_toc">Heading 1</h3>
                            </li>
                            <li><a class="list-item" href="#"><span>Link list 1 </span></a></li>
                            <li><a class="list-item" href="#"><span>Link list 2 </span></a></li>
                            <li><a class="list-item" href="#"><span>Link list 3 </span></a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-12 col-lg-4">
                    <div class="link-list-wrapper">
                        <ul class="link-list">
                            <li>
                                <h3 class="no_toc">Heading 2</h3>
                            </li>
                            <li><a class="list-item" href="#"><span>Link list 1 </span></a></li>
                            <li><a class="list-item" href="#"><span>Link list 2 </span></a></li>
                            <li><a class="list-item" href="#"><span>Link list 3 </span></a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-12 col-lg-4">
                    <div class="link-list-wrapper">
                        <ul class="link-list">
                            <li>
                                <h3 class="no_toc">Heading 3</h3>
                            </li>
                            <li><a class="list-item" href="#"><span>Link list 1 </span></a></li>
                            <li><a class="list-item" href="#"><span>Link list 2 </span></a></li>
                            <li><a class="list-item" href="#"><span>Link list 3</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </li>
{% endcomment %}
